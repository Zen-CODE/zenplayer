#:kivy 1.10
#: import ZenIcon ui.widgets.zenicon.ZenIcon
#: import ZenSelectableIcon ui.widgets.zenicon.ZenSelectableIcon
#: import VolumeSlider ui.screens.playing.playing.VolumeSlider
#: set pad 3
# <Label>:
#     font_size: 0.5 * self.height  # Increase the default font size

<ZenPlayer>:
    BoxLayout:
        orientation: 'vertical'
        pos_hint: {"x": 0, "y": 0}
        size_hint: 1, 1
        BoxLayout:
            # Header bar
            size_hint: 1, 0.075
            padding: pad
            canvas:
                Color:
                    rgba: 0.25, 0.25, 0.75, 0.5
                Line:
                    width: 2
                    points: self.x, self.y, self.right, self.y
            ZenSelectableIcon:
                group: "header"
                source: "images/home.png"
                on_release: root.show_screen("Playing")
            Widget:
            ZenSelectableIcon:
                group: "header"
                source: "images/add.png"
                on_release: root.show_screen("Artists")
            Widget:
            Label:
                text: "[b]" + root.header + "[/b]"
                markup: True
                color: 1, 1, 0, 1
                font_size: 0.6 * self.height
            Widget:
            ZenSelectableIcon:
                group: "header"
                source: "images/album.png"
                on_release: root.show_screen("Playlist")
            Widget:
            ZenSelectableIcon:
                group: "header"
                source: "images/info.png"
                on_release: root.show_screen("Info", filename="")

        BoxLayout:
            # Main screen area (below title bar)
            size_hint: 1, 0.85
            Slider:
                #  Track progress
                size_hint: 0.05, 1
                orientation: "vertical"
                max: 1
                value: root.ctrl.position
                on_touch_up: self.collide_point(*args[1].pos) and root.ctrl.set_position(self.value)
            ScreenManager:
                id: sm
                size_hint: 1, 1
            VolumeSlider:
                ctrl: root.ctrl
                size_hint: 0.05, 1
                orientation: "vertical"
                value: self.value if self.dragging else root.ctrl.volume
                max: 1
        BoxLayout:
            size_hint: 1, 0.075
            padding: pad
            canvas:
                Color:
                    rgba: 0.25, 0.25, 0.75, 0.5
                Line:
                    width: 2
                    points: self.x, self.top, self.right, self.top
            ZenIcon:
                # Stop
                source: "images/stop.png"
                on_release: root.ctrl.stop()
            Widget:
            ZenIcon:
                # Previous track button
                id: previous
                source: 'images/previous.png'
                on_release: root.ctrl.play_previous()
            Widget:
            ZenIcon:
                # Play button
                source: 'images/play.png' if root.ctrl.state != "Playing" else "images/pause.png"
                on_release: root.ctrl.play_pause()
            Widget:
            ZenIcon:
                id: next
                source: 'images/next.png'
                on_release: root.ctrl.play_next()
            Widget:
            ZenIcon:
                source: 'images/random.png'
                on_release: root.ctrl.zenplayer.show_screen("Albums", randomise=True)
