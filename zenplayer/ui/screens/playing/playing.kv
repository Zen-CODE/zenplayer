#:kivy 1.10
#: import VolumeSlider ui.screens.playing.playing.VolumeSlider

<MediaButton>:
    Image:
        source: root.source
        pos_hint: {'x': 0, 'y': 0}
        size_hint: 1, 1
        on_touch_down: self.collide_point(*args[1].pos) and root.dispatch('on_click')

<PlayingScreen>:
    BoxLayout:
        orientation: 'horizontal'
        canvas:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            # Left column
            size_hint_x: 0.1
            BoxLayout:
                size_hint: (1, 1)
                orientation: "vertical"
                padding: 10
                spacing: 10
                Slider:
                    size_hint_y: 0.9
                    orientation: "vertical"
                    max: 1
                    value: root.ctrl.position
                    on_touch_up: self.collide_point(*args[1].pos) and root.ctrl.set_position(self.value)
                Image:
                    size_hint_y: 0.075
                    source: 'images/progress.png'
        BoxLayout:
            # Center column
            id: center_screen
            size_hint_x: 0.8
            orientation: "vertical"
            padding: 10, 10, 10, 10
            BoxLayout:
                size_hint_y: 0.05
                Image:
                    source: 'images/add.png'
                    # on_touch_down: self.collide_point(*args[1].pos) and root.ctrl.show_screen("FileBrowser")
                    on_touch_down: self.collide_point(*args[1].pos) and root.ctrl.show_screen("Artists")
                Image:
                    source: 'images/zencode.jpg'
                Image:
                    source: 'images/playlist.png'
                    on_touch_down: self.collide_point(*args[1].pos) and root.ctrl.show_screen("Playlist")
            Label:
                text: root.ctrl.artist
                size_hint_y: 0.05
            Label:
                text: root.ctrl.album
                size_hint_y: 0.05
            Label:
                text: root.ctrl.track
                size_hint_y: 0.05
            BoxLayout:
                size_hint_y: 0.65
                padding: 10, 10, 10, 10
                on_touch_down: self.collide_point(*args[1].pos) and root.ctrl.show_screen("Info")
                Image:
                    source: root.ctrl.cover
                    allow_stretch: True
            Label:
                text: root.ctrl.time_display
                size_hint_y: 0.05
            BoxLayout:
                size_hint_y: 0.075
                orientation: "horizontal"
                MediaButton:
                    id: previous
                    source: 'images/previous.png'
                    on_click: root.ctrl.play_previous()
                MediaButton:
                    id: stop
                    source: 'images/stop.png'
                    on_click: root.ctrl.stop()
                MediaButton:
                    source: 'images/play.png' if root.ctrl.state != "paused" else "images/pause.png"
                    on_click: root.ctrl.play_pause()
                MediaButton:
                    id: next
                    source: 'images/next.png'
                    on_click: root.ctrl.play_next()

        BoxLayout:
            # Right sidebar
            orientation: "vertical"
            size_hint_x: 0.1
            padding: 10
            spacing: 10
            VolumeSlider:
                ctrl: root.ctrl
                size_hint_y: 0.9
                orientation: "vertical"
                value: self.value if self.dragging else root.ctrl.volume
                max: 1
            Image:
                size_hint_y: 0.075
                source: 'images/speaker.png'
